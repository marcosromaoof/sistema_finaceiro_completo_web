# Organizai - Lista de Tarefas

## Infraestrutura e Configuração
- [x] Definir schema do banco de dados com todas as tabelas necessárias
- [x] Configurar tema visual e paleta de cores
- [x] Criar layout principal com navegação

## Autenticação e Perfil
- [x] Sistema de autenticação básico (já incluído no template)
- [x] Perfil de usuário com informações pessoais
- [x] Configurações de notificações e preferências

## Dashboard Principal
- [x] Visão consolidada do patrimônio líquido
- [x] Gráficos interativos de receitas vs despesas
- [x] Saldo total e por conta
- [ ] Próximas contas a vencer
- [x] Metas em andamento
- [x] Sistema de alertas e notificações

## Agregação de Contas Financeiras
- [x] CRUD de contas financeiras (corrente, poupança, cartão de crédito, investimentos, empréstimos)
- [x] Sincronização manual de saldo
- [x] Interface para adicionar/editar/remover contas
- [x] Suporte a múltiplas moedas

## Transações
- [x] CRUD de transações (receitas e despesas)
- [x] Importação de transações (CSV/OFX)
- [x] Categorização automática usando IA
- [x] Regras de categorização personalizáveis
- [ ] Aprendizado contínuo com correções do usuário
- [x] Histórico completo de transações

## Orçamentação
- [x] Criação de orçamentos mensais por categoria
- [x] Acompanhamento em tempo real do gasto vs orçado
- [x] Alertas quando o orçamento está perto de estourar
- [x] Visualização de progresso por categoria
- [x] Rollover de saldo não utilizado (opcional)

## Metas Financeiras
- [x] Definição de metas de curto, médio e longo prazo
- [x] Calculadora de economia necessária
- [x] Acompanhamento visual do progresso
- [ ] Sugestões de como atingir a meta mais rápido
- [x] Histórico de contribuições

## Gestão de Dívidas
- [x] Listagem de dívidas e empréstimos
- [x] Planos de pagamento (método snowball ou avalanche)
- [x] Cálculo de juros e projeção de quitação
- [x] Acompanhamento de pagamentos realizados
- [x] Visualização de progresso de quitação

## Investimentos
- [x] Cadastro de investimentos por tipo (ações, fundos, renda fixa, etc.)
- [x] Acompanhamento de performance de carteiras
- [x] Gráficos de alocação de ativos
- [ ] Registro de dividendos e juros recebidos
- [ ] Comparação com benchmarks (CDI, Ibovespa, S&P500)
- [x] Cálculo de rentabilidade

## Planejamento para Aposentadoria
- [x] Calculadora de aposentadoria com projeções
- [x] Simulações de diferentes cenários de aporte
- [x] Visualização de crescimento ao longo do tempo
- [ ] Recomendações personalizadas

## Relatórios e Análises
- [x] Relatórios detalhados por categoria (integrado em Transações)
- [x] Relatórios por período (integrado em Transações)
- [x] Relatórios por conta (integrado em Transações)
- [ ] Exportação para PDF
- [ ] Exportação para Excel/CSV
- [ ] Análise de hábitos de gastos
- [ ] Identificação de gastos recorrentes e assinaturas

## Automações
- [x] Regras para categorização automática (integrado em Transacções)
- [x] Alertas personalizados (integrado em Alertas)
- [x] Notificações de vencimento de contas (integrado em Alertas)

## Educação Financeira
- [x] Calculadoras financeiras (integrado em Aposentadoria e Dívidas)
- [x] Dicas e tutoriais dentro do app
- [x] Artigos educativos

## Testes e Qualidade
- [x] Testes unitários para procedures críticos
- [x] Validação de fluxos principais
- [x] Tratamento de erros e casos extremos


## Funcionalidades Avançadas (Em Desenvolvimento)

### Painel Administrativo Avançado
- [ ] Dashboard de métricas (usuários, receita, churn)
- [ ] Gestão de usuários (listar, filtrar, bloquear)
- [ ] Gestão de planos de assinatura
- [ ] Histórico de pagamentos
- [ ] Relatórios financeiros da plataforma
- [ ] Logs de erros e sincronização
- [ ] Suporte ao cliente (tickets)

### Integração com IA
- [ ] Integração com OpenAI (GPT-4)
- [ ] Integração com Claude (Anthropic)
- [ ] Integração com Gemini (Google)
- [ ] Análise inteligente de transações
- [ ] Recomendações personalizadas
- [ ] Chatbot com IA para consultas

### Integração com n8n
- [ ] Configuração de webhooks
- [ ] Automações de fluxo de trabalho
- [ ] Integração com WhatsApp
- [ ] Sincronização de dados
- [ ] Notificações automáticas

### WhatsApp Integration
- [ ] Chatbot WhatsApp
- [ ] Consulta de saldo via WhatsApp
- [ ] Consulta de transações via WhatsApp
- [ ] Alertas via WhatsApp
- [ ] Envio de relatórios via WhatsApp

### Sistema de Cobrança Avançado
- [x] Integração com Stripe
- [x] Gestão de ciclos de cobrança
- [x] Webhooks de pagamento
- [ ] Emissão de notas fiscais
- [x] Histórico de transações

### Notificações em Massa
- [ ] Sistema de newsletters
- [ ] Envio de emails em massa
- [ ] Push notifications
- [ ] Segmentação de usuários
- [ ] Templates de mensagens


## Funcionalidades Finais a Implementar

### Autenticação Avançada
- [x] 2FA via SMS
- [x] 2FA via Authenticator App
- [x] Login Social com Google
- [x] Login Social com Apple
- [x] Login Social com Facebook

### Colaboração Familiar
- [x] Compartilhamento de orçamentos
- [x] Compartilhamento de metas
- [x] Controle de permissões (leitura/edição)
- [x] Convites para familiares
- [x] Dashboard familiar consolidado

### Transferências Automáticas
- [x] Configuração de transferências recorrentes
- [x] Regras de transferência automática
- [x] Histórico de transferências automáticas
- [x] Notificações de transferências realizadas

### Notificações em Massa
- [x] Sistema de notificações push
- [x] Envio de notificações em massa
- [x] Segmentação de usuários
- [x] Histórico de notificações
- [x] Agendamento de envios

### Melhorias no Dashboard
- [ ] Próximas contas a vencer
- [ ] Gráficos de tendência
- [ ] Comparação com mês anterior
- [ ] Sugestões personalizadas

### Benchmarks de Investimentos
- [ ] Comparação com CDI
- [ ] Comparação com Ibovespa
- [ ] Comparação com S&P500
- [ ] Gráficos comparativos


## Melhorias Solicitadas

### Controle de Acesso
- [x] Implementar middleware de autorização baseado em roles
- [x] Separar rotas admin de rotas de usuário
- [x] Ocultar menu admin para usuários comuns
- [ ] Proteger procedures admin com adminProcedure

### Painel Admin Avançado
- [x] Configurações de pagamento (Stripe keys)
- [x] Configurações de IA (OpenAI, Claude, Gemini tokens)
- [x] Configurações de n8n (webhook URLs, API keys)
- [x] Configurações de WhatsApp (número, token)
- [x] Gestão de usuários avançada
- [x] Métricas e analytics detalhados
- [ ] Logs de sistema e auditoria

### Chat IA Profissional
- [x] Interface de chat moderna com histórico
- [x] Contexto financeiro do usuário
- [x] Análises inteligentes de gastos
- [x] Sugestões personalizadas
- [x] Integração com dados reais do usuário
- [x] Streaming de respostas
- [x] Markdown rendering

### Dashboard Melhorado
- [ ] Gráficos interativos (Recharts)
- [ ] Próximas contas a vencer
- [ ] Tendências mensais
- [ ] Comparação período anterior

### Revisão de Código
- [ ] Otimizar queries do banco
- [ ] Melhorar tratamento de erros
- [ ] Adicionar validações
- [ ] Documentar funções complexas


## Integração com IAs Gratuitas

### Interface de Configuração de APIs
- [x] Criar página de configuração de APIs com instruções
- [x] Adicionar cards para cada API (Groq, Gemini, Tavily, Perplexity, Ollama)
- [x] Incluir links diretos para páginas de registro
- [x] Adicionar instruções passo a passo para obter API keys
- [x] Implementar validação de API keys
- [x] Adicionar status de conexão (conectado/desconectado)

### Integração com Groq
- [x] Implementar cliente Groq API no backend
- [x] Adicionar suporte a Llama 3.1 70B
- [x] Adicionar suporte a Mixtral 8x7B
- [ ] Implementar fallback automático
- [x] Integrar com Chat IA
- [x] Adicionar contexto financeiro do usuário
- [x] Criar procedures tRPC para chat

### Integração com Tavily Search
- [ ] Implementar cliente Tavily API
- [ ] Adicionar busca na web em tempo real
- [ ] Integrar resultados de busca no Chat IA

### Melhorias no Chat IA
- [ ] Adicionar busca na web para perguntas que requerem dados atualizados
- [ ] Melhorar análise de dados financeiros com contexto completo
- [ ] Adicionar sugestões baseadas em dados reais do mercado
- [ ] Implementar cache de respostas para economia de API calls


## Integração Tavily Search (Concluído)
- [x] Implementar cliente Tavily API no backend
- [x] Adicionar busca na web em tempo real
- [x] Integrar com Chat IA
- [x] Buscar cotações de ações
- [x] Buscar notícias econômicas
- [x] Buscar dados de mercado
- [x] Criar procedures tRPC para busca
- [x] Atualizar frontend para mostrar resultados


## Transformação em SaaS Completo (Em Progresso)

### Homepage Pública (Landing Page)
- [x] Criar página inicial pública com hero section
- [x] Adicionar seção de features/benefícios
- [x] Criar seção de pricing/planos
- [x] Adicionar testimonials/depoimentos
- [x] Criar seção de FAQ
- [x] Adicionar footer com links importantes
- [x] Implementar CTA (Call to Action) buttons
- [ ] Criar página "Sobre Nós"
- [ ] Criar página "Contato"
- [ ] Criar página "Termos de Uso"
- [ ] Criar página "Política de Privacidade"

### Sistema de Tickets/Suporte
- [x] Criar interface de criação de tickets
- [x] Implementar listagem de tickets do usuário
- [x] Adicionar sistema de prioridades
- [ ] Criar painel admin para gerenciar tickets
- [ ] Implementar sistema de respostas
- [ ] Adicionar notificações de novos tickets
- [x] Criar sistema de status (aberto, em andamento, fechado)
- [ ] Implementar upload de anexos em tickets

### Sistema de Cobrança e Planos
- [ ] Criar página de planos e preços
- [ ] Implementar checkout com Stripe
- [ ] Criar sistema de assinaturas recorrentes
- [ ] Implementar webhooks do Stripe
- [ ] Criar página de gerenciamento de assinatura
- [ ] Adicionar histórico de pagamentos
- [ ] Implementar cancelamento de assinatura
- [ ] Criar sistema de upgrade/downgrade de planos
- [ ] Adicionar trial gratuito de 14 dias

### Login Social com Google
- [ ] Configurar Google OAuth 2.0
- [ ] Implementar botão "Login com Google"
- [ ] Criar fluxo de autenticação OAuth
- [ ] Sincronizar dados do perfil Google
- [ ] Implementar linking de contas
- [ ] Adicionar opção de desconectar conta Google

### Verificação de Layout
- [ ] Verificar todas as páginas têm layout consistente
- [ ] Garantir menu lateral aparece em todas as páginas autenticadas
- [ ] Verificar responsividade mobile
- [ ] Corrigir problemas de navegação
- [ ] Garantir breadcrumbs funcionando
- [ ] Verificar estados de loading
- [ ] Verificar estados de erro

### Melhorias UX/UI
- [ ] Adicionar animações de transição
- [ ] Melhorar feedback visual de ações
- [ ] Implementar skeleton loaders
- [ ] Adicionar empty states informativos
- [ ] Melhorar mensagens de erro
- [ ] Adicionar tooltips explicativos
- [ ] Implementar tour guiado para novos usuários


## Melhorias na Landing Page e Suporte (Nova Solicitação)

### Landing Page Profissional
- [ ] Adicionar imagens ilustrativas para cada funcionalidade
- [ ] Criar seção detalhada de recursos com screenshots
- [ ] Adicionar animações e transições suaves
- [ ] Melhorar hero section com imagem de destaque
- [ ] Criar seção de casos de uso
- [ ] Adicionar seção de estatísticas/números
- [ ] Melhorar seção de depoimentos com fotos
- [ ] Adicionar seção de comparação com concorrentes
- [ ] Criar galeria de screenshots do sistema

### Chat de Suporte com IA
- [x] Criar componente de chat flutuante na landing page
- [x] Implementar interface de chat moderna
- [x] Integrar com Groq/LLM para respostas automáticas
- [x] Criar base de conhecimento do sistema
- [x] Configurar IA com informações de todas as funcionalidades
- [x] Adicionar respostas pré-programadas para perguntas frequentes
- [x] Implementar histórico de conversas
- [ ] Adicionar opção de escalar para suporte humano


## Renomeação da Aplicação (Nova Solicitação)

### Renomear de "FinMaster Pro" para "Organizai"
- [x] Atualizar nome na landing page (hero, header, footer)
- [x] Atualizar nome no dashboard e sidebar
- [x] Atualizar nome em todos os componentes
- [x] Atualizar nome no SupportChatWidget
- [x] Atualizar nome em N8nIntegration
- [x] Atualizar nome em SocialLogin
- [x] Atualizar package.json
- [x] Atualizar todo.md
- [ ] Atualizar variável de ambiente VITE_APP_TITLE (manual via UI)
- [x] Verificar todas as referências ao nome antigo


## Implementação Completa do Checkout Stripe (✅ Concluído)

### Schema do Banco de Dados
- [x] Adicionar campos de assinatura Stripe na tabela users
- [x] Executar migração do banco de dados

### Procedures tRPC
- [x] Criar procedure createCheckoutSession
- [x] Criar procedure getSubscriptionStatus
- [x] Criar procedure cancelSubscription
- [x] Criar helper updateUser para atualizar dados do usuário

### Páginas de Checkout
- [x] Criar página /checkout/success
- [x] Criar página /checkout/canceled
- [x] Adicionar rotas no App.tsx

### Integração Landing Page
- [x] Integrar botão "Começar Grátis" com checkout
- [x] Integrar botão "Assinar Premium" com checkout
- [x] Integrar botão "Assinar Family" com checkout
- [x] Adicionar loading states

### Webhooks Stripe
- [x] Criar endpoint /api/webhooks/stripe
- [x] Processar evento checkout.session.completed
- [x] Processar evento customer.subscription.created
- [x] Processar evento customer.subscription.updated
- [x] Processar evento customer.subscription.deleted
- [x] Processar evento invoice.payment_succeeded
- [x] Processar evento invoice.payment_failed
- [x] Atualizar status de assinatura no banco

### Testes
- [x] Criar testes unitários para procedures de checkout
- [x] Testar autenticação e validação de parâmetros
- [x] Testar cancelamento de assinatura


## Página de Billing (✅ Concluído)

### Procedures tRPC
- [x] Criar procedure createCustomerPortalSession
- [x] Criar procedure getInvoices
- [x] Criar procedure getCurrentSubscription

### Página de Billing
- [x] Criar página /dashboard/billing
- [x] Exibir informações da assinatura atual
- [x] Exibir próxima data de cobrança
- [x] Botão para gerenciar assinatura (Customer Portal)
- [x] Botão para atualizar método de pagamento (via Customer Portal)
- [x] Histórico de faturas com download
- [x] Opções de upgrade/downgrade de plano (via Customer Portal)
- [x] Botão para cancelar assinatura

### Integração
- [x] Adicionar rota no App.tsx
- [x] Adicionar link no menu do dashboard
- [x] UI completa com badges de status e formatação de valores

### Testes
- [x] Criar testes unitários para procedures de billing
- [x] Testar autenticação e validação de Stripe customer
- [x] Testar retorno de faturas e assinatura


## Correção de Erro: process is not defined (✅ Concluído)
- [x] Mover products.ts para pasta shared
- [x] Remover dependências de process.env do código compartilhado
- [x] Criar função getPriceId para uso server-side
- [x] Atualizar imports no Billing.tsx
- [x] Atualizar imports no server/routers.ts
- [x] Remover arquivo products.ts antigo
- [x] Testar página de billing no frontend
- [x] Executar todos os testes (35 testes passando)


## Próximas Contas a Vencer no Dashboard (✅ Concluído)
- [x] Criar procedure tRPC para buscar transações futuras (getUpcomingBills)
- [x] Criar função getUpcomingBills no db.ts
- [x] Criar componente UpcomingBills no dashboard
- [x] Exibir próximas 7 contas a vencer (configurável)
- [x] Mostrar data de vencimento, valor e categoria
- [x] Adicionar badge de status (vence hoje, atrasado, futuro com dias)
- [x] Adicionar botão para marcar como pago
- [x] Integrar no Dashboard principal (Home.tsx)
- [x] Adicionar campo isPending ao update de transações
- [x] Criar testes unitários (7 testes passando)

## Exportação PDF/Excel de Relatórios (✅ Concluído)
- [x] Instalar bibliotecas (jspdf, jspdf-autotable, xlsx)
- [x] Criar helper exportReports.ts com funções de exportação
- [x] Implementar exportação PDF com formatação (autoTable)
- [x] Implementar exportação Excel com múltiplas abas (Transações + Resumo)
- [x] Integrar exportações na página de relatórios
- [x] Incluir resumo financeiro no PDF (receitas, despesas, saldo)
- [x] Adicionar cabeçalho, rodapé e paginação no PDF
- [x] Formatar valores em moeda brasileira (R$)
- [x] Adicionar timestamps nos nomes dos arquivos

## Análise de Gastos Recorrentes (✅ Concluído)
- [x] Criar algoritmo para detectar transações recorrentes (recurringAnalysis.ts)
- [x] Implementar agrupamento por similaridade de descrição e valor
- [x] Detectar frequência (semanal, mensal, trimestral, anual)
- [x] Calcular impacto anual e mensal
- [x] Criar procedure tRPC analyzeRecurring
- [x] Atualizar página RecurringExpenses com novo algoritmo
- [x] Exibir lista de gastos recorrentes detectados
- [x] Mostrar próxima data esperada de cobrança
- [x] Adicionar sugestões de economia para gastos > R$1000/ano
- [x] Exibir cards de resumo (total, impacto anual, impacto mensal)


## Comparação com Benchmarks (✅ Concluído)

### API de Benchmarks
- [x] Pesquisar APIs públicas para CDI, Ibovespa, S&P500 (Yahoo Finance API)
- [x] Criar helper benchmarks.ts para buscar dados históricos
- [x] Implementar funções getBenchmarkHistory e getMultipleBenchmarks
- [x] Criar procedure tRPC getHistory
- [x] Criar procedure tRPC getMultiple
- [x] Criar procedure tRPC comparePortfolio

### Cálculos de Métricas Financeiras
- [x] Implementar cálculo de retorno do portfólio
- [x] Implementar cálculo de Alpha (retorno acima do benchmark)
- [x] Implementar cálculo de Beta (volatilidade relativa)
- [x] Implementar cálculo de Sharpe Ratio
- [x] Implementar cálculo de retornos diários
- [x] Integrar cálculos com procedure comparePortfolio

### Página de Análise
- [x] Criar página /benchmark-analysis
- [x] Implementar gráfico de linha comparativo (Recharts)
- [x] Exibir performance do portfólio vs benchmarks selecionados
- [x] Suporte para Ibovespa, S&P500 e CDI
- [x] Cards de resumo com métricas principais (Alpha, retorno, ganho/perda)
- [x] Seção de insights com explicações

### Filtros e Integração
- [x] Adicionar filtro de período (1M, 3M, 6M, 1A, 2A, 5A, Max)
- [x] Adicionar seletor de benchmarks (Ibovespa, S&P500, CDI)
- [x] Adicionar link no menu do dashboard
- [x] Adicionar rota no App.tsx
- [x] Botão de atualizar dados

### Testes
- [x] Validar integração com Yahoo Finance API
- [x] Testar procedures tRPC de benchmarks
- [x] Validar cálculos de métricas financeiras


## Melhorias UX/UI (✅ Concluído)

### Animações
- [x] Instalar biblioteca framer-motion
- [x] Criar componente FadeIn para fade-in de elementos
- [x] Criar componentes StaggerChildren e StaggerItem
- [x] Adicionar transições de página suaves
- [x] Implementar hover effects em cards (CSS)
- [x] Criar arquivo animations.css com animações customizadas
- [x] Adicionar animações de slide-in, fade-in, scale-in
- [x] Implementar ripple effect em botões
- [x] Adicionar animação de checkmark de sucesso

### Skeleton Loaders
- [x] Criar componente CardSkeleton reutilizável
- [x] Criar componente TableSkeleton para tabelas
- [x] Criar componente ChartSkeleton para gráficos
- [x] Criar componente DashboardSkeleton completo
- [x] Criar componente TransactionsSkeleton
- [x] Criar componente FormSkeleton
- [x] Adicionar skeleton em Dashboard (Home.tsx)
- [x] Adicionar skeleton em BenchmarkAnalysis
- [x] Integrar animações FadeIn e Stagger no Home.tsx

### Tooltips
- [x] Criar componente InfoTooltip reutilizável
- [x] Criar componente LabelWithTooltip para formulários
- [x] Adicionar tooltip em métrica Alpha no BenchmarkAnalysis
- [x] Configurar delay de 200ms para melhor UX
- [x] Suporte a posição customizável (top, right, bottom, left)

### Micro-interações
- [x] Criar componente LoadingButton com estado de loading
- [x] Adicionar animação whileTap (scale 0.95) em botões
- [x] Implementar ripple effect via CSS
- [x] Adicionar hover effects em cards (hover-lift, card-hover)
- [x] Criar animações de pulse e spinner
- [x] Adicionar progress bar animado

### Polimento Geral
- [x] Adicionar focus states acessíveis (outline primary)
- [x] Implementar smooth scrolling (scroll-behavior: smooth)
- [x] Garantir transições suaves com cubic-bezier
- [x] Criar biblioteca completa de animações CSS
- [x] Integrar animações no index.css


## Melhorias no Fluxo OAuth (✅ Concluído)
- [x] Investigar logs do servidor para identificar causa do erro
- [x] Verificar configuração de variáveis de ambiente OAuth
- [x] Verificar implementação do callback em server/_core/
- [x] Testar fluxo de login completo no ambiente dev
- [x] Validar redirecionamento após autenticação
- [x] Criar página de erro OAuth informativa (AuthError.tsx)
- [x] Melhorar tratamento de erros no callback com try-catch granular
- [x] Adicionar logging detalhado para diagnóstico (console.error em cada etapa)
- [x] Criar 5 tipos diferentes de mensagens de erro (callback_failed, token_exchange, user_info, session_creation, unknown)
- [x] Adicionar sugestões de ação específicas para cada tipo de erro
- [x] Implementar redirecionamento automático para /auth-error com parâmetros
- [x] Adicionar botões de ação (Tentar Novamente, Voltar ao Início, Contatar Suporte)
- [x] Incluir detalhes técnicos para facilitar suporte
- [x] Adicionar link para documentação de ajuda
